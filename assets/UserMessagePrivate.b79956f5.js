import{A as E,M}from"./useMessage.84d112e6.js";import{C as y}from"./useDate.08bd623a.js";import{r,a0 as U,b as h,o as c,c as m,d as e,F as p,a3 as B,e as F,f as _,t as n,a1 as P}from"./index.e0ef0c6a.js";const V={class:"col-12 py-0 px-2"},$={class:"card"},A=e("h5",null,"\u79C1\u4EBA\u4FE1\u4EF6",-1),N={class:"flex flex-column-reverse"},j={__name:"UserMessagePrivate",emits:["showSuccess","showInfo","showWarn","showError"],setup(S,{emit:i}){const f=new y,u=new M,g=new E,{user:w}=g.getUser(),l=r(!1),o=r({}),v=r([]),d=t=>f.convertDate(t),b=t=>{u.getMail(t).then(s=>{o.value=s,l.value=!l.value}).catch(s=>{i("showError",s)})},x=()=>{u.getPrivateMail().then(t=>{v.value=t}).catch(t=>{i("showError",t)})};return U(()=>{w.value!==null&&x()}),(t,s)=>{const k=h("Fieldset"),C=h("Dialog");return c(),m(p,null,[e("div",V,[e("div",$,[A,e("div",N,[(c(!0),m(p,null,B(v.value,(a,D)=>(c(),P(k,{key:D,legend:`${a.title} - ${d(a.date)}`,class:"mb-3 cursor-pointer hover:surface-ground",onClick:I=>b(a.mailKey)},{default:_(()=>[e("div",null,[e("p",null,"\u5BC4\u4EF6\u8005\uFF1A"+n(a.fromUid),1)])]),_:2},1032,["legend","onClick"]))),128))])])]),F(C,{visible:l.value,"onUpdate:visible":s[0]||(s[0]=a=>l.value=a),modal:"",header:o.value.title,style:{"min-width":"50vw",margin:"2rem"}},{default:_(()=>[e("p",null,"\u5BC4\u4EF6\u8005\uFF1A"+n(o.value.fromUid),1),e("p",null,n(o.value.content),1),e("p",null,"\u5BC4\u4EF6\u65E5\u671F\uFF1A"+n(d(o.value.date)),1)]),_:1},8,["visible","header"])],64)}}};export{j as default};
