import{A as D,M as E}from"./useForum.9eb1f759.js";import{C as M}from"./useDate.08bd623a.js";import{r,X as S,b as m,o as c,c as h,d as e,a2 as p,a3 as U,e as B,f as _,t as n,a0 as F}from"./index.e72bd00b.js";const V={class:"col-12 py-0 px-2"},$={class:"card"},A=e("h5",null,"\u7CFB\u7D71\u4FE1\u4EF6",-1),N={class:"flex flex-column-reverse"},j={__name:"UserMessageSystem",emits:["showSuccess","showInfo","showWarn","showError"],setup(I,{emit:i}){const f=new M,u=new E,g=new D,{user:w}=g.getUser(),l=r(!1),o=r({}),d=r([]),v=s=>f.convertDate(s),b=s=>{u.getMail(s).then(t=>{o.value=t,l.value=!l.value}).catch(t=>{i("showError",t)})},y=()=>{u.getSystemMail().then(s=>{d.value=s}).catch(s=>{i("showError",s)})};return S(()=>{w.value!==null&&y()}),(s,t)=>{const x=m("Fieldset"),k=m("Dialog");return c(),h(p,null,[e("div",V,[e("div",$,[A,e("div",N,[(c(!0),h(p,null,U(d.value,(a,C)=>(c(),F(x,{key:C,legend:`${a.title} - ${v(a.date)}`,class:"mb-3 cursor-pointer hover:surface-ground",onClick:K=>b(a.mailKey)},{default:_(()=>[e("div",null,[e("p",null,"\u5BC4\u4EF6\u8005\uFF1A"+n(a.fromUid),1)])]),_:2},1032,["legend","onClick"]))),128))])])]),B(k,{visible:l.value,"onUpdate:visible":t[0]||(t[0]=a=>l.value=a),modal:"",header:o.value.title,style:{"min-width":"50vw",margin:"2rem"}},{default:_(()=>[e("p",null,"\u5BC4\u4EF6\u8005\uFF1A"+n(o.value.fromUid),1),e("p",null,n(o.value.content),1),e("p",null,"\u5BC4\u4EF6\u65E5\u671F\uFF1A"+n(v(o.value.date)),1)]),_:1},8,["visible","header"])],64)}}};export{j as default};
