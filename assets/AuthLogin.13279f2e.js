import{C as s,r as v,n as N,b as f,o as B,c as D,d as a,e as r,f as w,h as x,_ as L,p as H}from"./index.27a5a0bf.js";import"./user.35d041ca.js";import{A,M}from"./useForum.888ec3c8.js";class P{constructor(){}setLocalStorage(e,o){window.localStorage.setItem(e,JSON.stringify(o))}setSessionStorage(e,o){window.sessionStorage.setItem(e,JSON.stringify(o))}getLocalStorage(e){const o=window.localStorage.getItem(e);return JSON.parse(o)}getSessionStorage(e){const o=window.sessionStorage.getItem(e);return JSON.parse(o)}removeLocalStorage(e){window.localStorage.removeItem(e)}clearLocalStorage(){window.localStorage.clear()}}class Y{constructor(){this.KEY="ZHMxbWRhczE5amNtN3Rnaw==",this.IV="ZTkzbmRoN2Z2bmFwcWNvdw=="}aesEncryp(e){const o=this.base64Decrypt(this.KEY),c=this.base64Decrypt(this.IV),d=s.enc.Utf8.parse(e),u=s.enc.Utf8.parse(o),g=s.enc.Utf8.parse(c);return s.AES.encrypt(d,u,{iv:g,mode:s.mode.CBC,padding:s.pad.Pkcs7}).ciphertext.toString()}aesDecrypt(e){const o=this.base64Decrypt(this.KEY),c=this.base64Decrypt(this.IV);let d=s.enc.Hex.parse(e),u=s.enc.Base64.stringify(d);const g=s.enc.Utf8.parse(o),t=s.enc.Utf8.parse(c);return s.AES.decrypt(u,g,{iv:t,mode:s.mode.CBC,padding:s.pad.Pkcs7}).toString(s.enc.Utf8).toString()}base64Encryp(e){const o=s.enc.Utf8.parse(e);return s.enc.Base64.stringify(o)}base64Decrypt(e){return s.enc.Base64.parse(e).toString(s.enc.Utf8)}}const J={class:"surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"},K={class:"flex flex-column align-items-center justify-content-center w-11 md:w-auto"},j={class:"w-11 md:w-auto",style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},O={class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},R={class:"text-center mb-4"},T=a("img",{src:L,alt:"Image",height:"50",class:"mb-3"},null,-1),W=a("div",{class:"text-900 text-3xl font-medium mb-3"},"\u5E33\u6236\u767B\u5165",-1),Z=a("label",{for:"email1",class:"block text-900 text-xl font-medium mb-2"},"\u4FE1\u7BB1",-1),z=a("label",{for:"password1",class:"block text-900 font-medium text-xl mb-2"},"\u5BC6\u78BC",-1),$={class:"flex align-items-center justify-content-between mb-4 gap-5"},F={class:"flex align-items-center"},G=a("label",{for:"rememberme1"},"\u8A18\u4F4F\u5E33\u5BC6",-1),X=a("div",{class:"flex align-items-center justify-content-center flex-wrap"},[a("p",{class:"w-full"},"\u8A2A\u5BA2\u5E33\u865F\u5728\u700F\u89BD\u5668\u95DC\u9589\u6642\u5C07\u6703\u907A\u5931\uFF0C\u767B\u5165\u5F8C\u8ACB\u5118\u901F\u81F3\u500B\u4EBA\u8CC7\u6599\u9801\u5B8C\u6210\u8A3B\u518A\u3002"),a("p",null,"\u662F\u5426\u4EE5\u8A2A\u5BA2\u8EAB\u4EFD\u767B\u5165\uFF1F")],-1),te={__name:"AuthLogin",emits:["showSuccess","showInfo","showWarn","showError"],setup(b,{emit:e}){const o=H(),c=new P,d=new Y,u=new A,g=new M,t=v({email:"",password:"",checked:!1}),y=v({title:"\u8A2A\u5BA2\u767B\u5165\u6CE8\u610F\u4E8B\u9805",content:"\u8A2A\u5BA2\u5E33\u865F\u70BA\u81E8\u6642\u6027\u5E33\u865F\uFF0C\u767B\u51FA\u6216\u700F\u89BD\u5668\u95DC\u9589\u5F8C\u5C07\u7121\u6CD5\u518D\u6B21\u767B\u5165\u76F8\u540C\u5E33\u865F\uFF0C\u8ACB\u5118\u901F\u524D\u5F80\u500B\u4EBA\u8CC7\u6599\u9801\u9762\uFF0C\u9032\u884C\u4FE1\u7BB1\u8A3B\u518A\u3002\u9801\u9762\u7DB2\u5740\uFF1Ahttp://localhost:5173/Vue3-Game-Xian/#/user/userProfile",type:"system"}),m=v(!1),_=(p,n)=>{u.signIn(p,n).then(i=>{i&&(t.value.checked?(t.value.password=d.aesEncryp(t.value.password),c.setLocalStorage("account",t.value)):c.removeLocalStorage("account"),e("showSuccess","\u767B\u5165\u6210\u529F"),o.push("/"))}).catch(i=>{e("showError",i)})},S=()=>{m.value=!1,u.signInAnonymously().then(p=>{p&&(e("showSuccess","\u767B\u5165\u6210\u529F"),g.sendSystemMail(y.value),o.push("/"))}).catch(p=>{e("showError",p)})},k=()=>{m.value=!0},V=()=>{m.value=!1};return N(()=>{c.getLocalStorage("account")&&(t.value=c.getLocalStorage("account"),t.value.password=d.aesDecrypt(t.value.password))}),(p,n)=>{const i=f("router-link"),C=f("InputText"),E=f("Password"),I=f("Checkbox"),h=f("Button"),U=f("Dialog");return B(),D("div",J,[a("div",K,[a("div",j,[a("div",O,[a("div",R,[T,W,r(i,{class:"font-medium no-underline ml-0 text-right cursor-pointer",style:{color:"var(--primary-color)"},to:"/auth/login"},{default:w(()=>[x("\u5E33\u6236\u767B\u5165")]),_:1}),r(i,{class:"font-medium no-underline ml-2 text-right cursor-pointer",style:{color:"var(--primary-color)"},to:"/auth/register"},{default:w(()=>[x("\u5E33\u6236\u8A3B\u518A")]),_:1})]),a("div",null,[Z,r(C,{id:"email1",type:"text",placeholder:"Email address",class:"w-full md:w-30rem mb-4",style:{padding:"1rem"},modelValue:t.value.email,"onUpdate:modelValue":n[0]||(n[0]=l=>t.value.email=l)},null,8,["modelValue"]),z,r(E,{id:"password1",modelValue:t.value.password,"onUpdate:modelValue":n[1]||(n[1]=l=>t.value.password=l),placeholder:"Password",feedback:!1,toggleMask:!0,class:"w-full mb-3",inputClass:"w-full"},null,8,["modelValue"]),a("div",$,[a("div",F,[r(I,{modelValue:t.value.checked,"onUpdate:modelValue":n[2]||(n[2]=l=>t.value.checked=l),id:"rememberme1",binary:"",class:"mr-2"},null,8,["modelValue"]),G]),r(i,{class:"font-medium no-underline ml-2 text-right cursor-pointer",style:{color:"var(--primary-color)"},to:"/auth/forget"},{default:w(()=>[x("\u5FD8\u8A18\u5BC6\u78BC?")]),_:1})]),r(h,{label:"\u767B\u5165",class:"w-full p-3 text-xl mb-2",onClick:n[3]||(n[3]=l=>_(t.value.email,t.value.password))}),r(h,{label:"\u4EE5\u8A2A\u5BA2\u8EAB\u4EFD\u767B\u5165",class:"w-full p-3 text-xl",onClick:k})])])]),r(U,{header:"\u78BA\u8A8D",visible:m.value,"onUpdate:visible":n[5]||(n[5]=l=>m.value=l),style:{width:"350px"},modal:!0},{footer:w(()=>[r(h,{label:"No",icon:"pi pi-times",onClick:V,class:"p-button-text"}),r(h,{label:"Yes",icon:"pi pi-check",onClick:n[4]||(n[4]=l=>S()),class:"p-button-text"})]),default:w(()=>[X]),_:1},8,["visible"])])])}}};export{te as default};
