import{r,U as E,b as h,o as c,c as m,d as e,$ as _,a0 as M,e as U,f as p,t as n,Y as C,a1 as S}from"./index.3d7aaf87.js";import{A as B,M as $}from"./useForum.112dbe34.js";const F={class:"col-12 py-0 px-2"},V={class:"card"},A=e("h5",null,"\u7CFB\u7D71\u4FE1\u4EF6",-1),N={class:"flex flex-column-reverse"},Y={__name:"UserMessageSystem",emits:["showSuccess","showInfo","showWarn","showError"],setup(I,{emit:i}){const f=new S,u=new $,g=new B,{user:w}=g.getUser(),l=r(!1),o=r({}),d=r([]),v=s=>f.convertDate(s),b=s=>{u.getMail(s).then(t=>{o.value=t,l.value=!l.value}).catch(t=>{i("showError",t)})},y=()=>{u.getSystemMail().then(s=>{d.value=s}).catch(s=>{i("showError",s)})};return E(()=>{w.value!==null&&y()}),(s,t)=>{const x=h("Fieldset"),k=h("Dialog");return c(),m(_,null,[e("div",F,[e("div",V,[A,e("div",N,[(c(!0),m(_,null,M(d.value,(a,D)=>(c(),C(x,{key:D,legend:`${a.title} - ${v(a.date)}`,class:"mb-3 cursor-pointer hover:surface-ground",onClick:K=>b(a.mailKey)},{default:p(()=>[e("div",null,[e("p",null,"\u5BC4\u4EF6\u8005\uFF1A"+n(a.fromUid),1)])]),_:2},1032,["legend","onClick"]))),128))])])]),U(k,{visible:l.value,"onUpdate:visible":t[0]||(t[0]=a=>l.value=a),modal:"",header:o.value.title,style:{"min-width":"50vw",margin:"2rem"}},{default:p(()=>[e("p",null,"\u5BC4\u4EF6\u8005\uFF1A"+n(o.value.fromUid),1),e("p",null,n(o.value.content),1),e("p",null,"\u5BC4\u4EF6\u65E5\u671F\uFF1A"+n(v(o.value.date)),1)]),_:1},8,["visible","header"])],64)}}};export{Y as default};
