import{A as U,M as F}from"./useForum.55d32e51.js";import{C as B}from"./useDate.08bd623a.js";import{r,X as N,b as f,o as u,c as p,d as s,a2 as _,a3 as P,e as V,f as g,t as c,a0 as $}from"./index.a1f6912d.js";const A={class:"col-12 py-0 px-2"},I={class:"card"},K=s("h5",null,"\u79C1\u4EBA\u4FE1\u4EF6",-1),S={class:"flex flex-column-reverse"},z={__name:"UserMessagePrivate",emits:["showSuccess","showInfo","showWarn","showError"],setup(L,{emit:v}){const w=new B,i=new F,b=new U,{user:x}=b.getUser(),o=r(!1),n=r({}),d=r([]),l=r({}),m=e=>w.convertDate(e),D=e=>{i.getMail(e).then(t=>{n.value=t,o.value=!o.value}).catch(t=>{v("showError",t)})},h=e=>l.value[e]?l.value[e]:e,k=()=>{i.getPrivateMail().then(e=>{d.value=e}).catch(e=>{v("showError",e)})},y=()=>{i.getFriends().then(e=>{for(let t in e)e[t].name===""||e[t].name===void 0?l.value[t]=t:l.value[t]=e[t].name})};return N(()=>{x.value!==null&&(k(),y())}),(e,t)=>{const C=f("Fieldset"),E=f("Dialog");return u(),p(_,null,[s("div",A,[s("div",I,[K,s("div",S,[(u(!0),p(_,null,P(d.value,(a,M)=>(u(),$(C,{key:M,legend:`${a.title} - ${m(a.date)}`,class:"mb-3 cursor-pointer hover:surface-ground",onClick:W=>D(a.mailKey)},{default:g(()=>[s("div",null,[s("p",null,"\u5BC4\u4EF6\u8005\uFF1A"+c(h(a.fromUid)),1)])]),_:2},1032,["legend","onClick"]))),128))])])]),V(E,{visible:o.value,"onUpdate:visible":t[0]||(t[0]=a=>o.value=a),modal:"",header:n.value.title,style:{"min-width":"50vw",margin:"2rem"}},{default:g(()=>[s("p",null,"\u5BC4\u4EF6\u8005\uFF1A"+c(h(n.value.fromUid)),1),s("p",null,c(n.value.content),1),s("p",null,"\u5BC4\u4EF6\u65E5\u671F\uFF1A"+c(m(n.value.date)),1)]),_:1},8,["visible","header"])],64)}}};export{z as default};
