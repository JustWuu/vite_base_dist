import{r as v,j as re,b as x,o as ne,c as se,d as a,e as c,f as w,h as C,_ as ae,k as le}from"./index.3d7aaf87.js";import{A as ie,M as ce}from"./useForum.112dbe34.js";const T="3.7.5",ue=T,de=typeof atob=="function",fe=typeof btoa=="function",g=typeof Buffer=="function",V=typeof TextDecoder=="function"?new TextDecoder:void 0,E=typeof TextEncoder=="function"?new TextEncoder:void 0,me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=Array.prototype.slice.call(me),A=(e=>{let t={};return e.forEach((o,r)=>t[o]=r),t})(y),pe=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,n=String.fromCharCode.bind(String),F=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),O=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),P=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),j=e=>{let t,o,r,u,i="";const s=e.length%3;for(let m=0;m<e.length;){if((o=e.charCodeAt(m++))>255||(r=e.charCodeAt(m++))>255||(u=e.charCodeAt(m++))>255)throw new TypeError("invalid character found");t=o<<16|r<<8|u,i+=y[t>>18&63]+y[t>>12&63]+y[t>>6&63]+y[t&63]}return s?i.slice(0,s-3)+"===".substring(s):i},k=fe?e=>btoa(e):g?e=>Buffer.from(e,"binary").toString("base64"):j,B=g?e=>Buffer.from(e).toString("base64"):e=>{let o=[];for(let r=0,u=e.length;r<u;r+=4096)o.push(n.apply(null,e.subarray(r,r+4096)));return k(o.join(""))},S=(e,t=!1)=>t?O(B(e)):B(e),xe=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?n(192|t>>>6)+n(128|t&63):n(224|t>>>12&15)+n(128|t>>>6&63)+n(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return n(240|t>>>18&7)+n(128|t>>>12&63)+n(128|t>>>6&63)+n(128|t&63)}},he=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,L=e=>e.replace(he,xe),D=g?e=>Buffer.from(e,"utf8").toString("base64"):E?e=>B(E.encode(e)):e=>k(L(e)),h=(e,t=!1)=>t?O(D(e)):D(e),N=e=>h(e,!0),ge=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,be=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),o=t-65536;return n((o>>>10)+55296)+n((o&1023)+56320);case 3:return n((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return n((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},z=e=>e.replace(ge,be),J=e=>{if(e=e.replace(/\s+/g,""),!pe.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,o="",r,u;for(let i=0;i<e.length;)t=A[e.charAt(i++)]<<18|A[e.charAt(i++)]<<12|(r=A[e.charAt(i++)])<<6|(u=A[e.charAt(i++)]),o+=r===64?n(t>>16&255):u===64?n(t>>16&255,t>>8&255):n(t>>16&255,t>>8&255,t&255);return o},I=de?e=>atob(P(e)):g?e=>Buffer.from(e,"base64").toString("binary"):J,Z=g?e=>F(Buffer.from(e,"base64")):e=>F(I(e).split("").map(t=>t.charCodeAt(0))),M=e=>Z($(e)),we=g?e=>Buffer.from(e,"base64").toString("utf8"):V?e=>V.decode(Z(e)):e=>z(I(e)),$=e=>P(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),U=e=>we($(e)),ye=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},G=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),W=function(){const e=(t,o)=>Object.defineProperty(String.prototype,t,G(o));e("fromBase64",function(){return U(this)}),e("toBase64",function(t){return h(this,t)}),e("toBase64URI",function(){return h(this,!0)}),e("toBase64URL",function(){return h(this,!0)}),e("toUint8Array",function(){return M(this)})},X=function(){const e=(t,o)=>Object.defineProperty(Uint8Array.prototype,t,G(o));e("toBase64",function(t){return S(this,t)}),e("toBase64URI",function(){return S(this,!0)}),e("toBase64URL",function(){return S(this,!0)})},_e=()=>{W(),X()},R={version:T,VERSION:ue,atob:I,atobPolyfill:J,btoa:k,btoaPolyfill:j,fromBase64:U,toBase64:h,encode:h,encodeURI:N,encodeURL:N,utob:L,btou:z,decode:U,isValid:ye,fromUint8Array:S,toUint8Array:M,extendString:W,extendUint8Array:X,extendBuiltins:_e};class Ae{constructor(){}setLocalStorage(t,o){window.localStorage.setItem(t,JSON.stringify(o))}setSessionStorage(t,o){window.sessionStorage.setItem(t,JSON.stringify(o))}getLocalStorage(t){const o=window.localStorage.getItem(t);return JSON.parse(o)}getSessionStorage(t){const o=window.sessionStorage.getItem(t);return JSON.parse(o)}removeLocalStorage(t){window.localStorage.removeItem(t)}clearLocalStorage(){window.localStorage.clear()}setAuthStorage(t){const o={email:t.email,password:R.encode(t.password),checked:t.checked};window.localStorage.setItem("account",JSON.stringify(o))}getAuthStorage(){const t=window.localStorage.getItem("account");if(!t)return!1;const o=JSON.parse(t);return o.password=R.decode(o.password),o}resetAuthStorage(){window.localStorage.removeItem("account")}}const Se={class:"surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"},ve={class:"flex flex-column align-items-center justify-content-center w-11 md:w-auto"},Ce={class:"w-11 md:w-auto",style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},Be={class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},Ue={class:"text-center mb-4"},ke=a("img",{src:ae,alt:"Image",height:"50",class:"mb-3"},null,-1),Ie=a("div",{class:"text-900 text-3xl font-medium mb-3"},"\u5E33\u6236\u767B\u5165",-1),Ve=a("label",{for:"email1",class:"block text-900 text-xl font-medium mb-2"},"\u4FE1\u7BB1",-1),Ee=a("label",{for:"password1",class:"block text-900 font-medium text-xl mb-2"},"\u5BC6\u78BC",-1),Fe={class:"flex align-items-center justify-content-between mb-4 gap-5"},De={class:"flex align-items-center"},Ne=a("label",{for:"rememberme1"},"\u8A18\u4F4F\u5E33\u5BC6",-1),Re=a("div",{class:"flex align-items-center justify-content-center flex-wrap"},[a("p",{class:"w-full"},"\u8A2A\u5BA2\u5E33\u865F\u5728\u700F\u89BD\u5668\u95DC\u9589\u6642\u5C07\u6703\u907A\u5931\uFF0C\u767B\u5165\u5F8C\u8ACB\u5118\u901F\u81F3\u500B\u4EBA\u8CC7\u6599\u9801\u5B8C\u6210\u8A3B\u518A\u3002"),a("p",null,"\u662F\u5426\u4EE5\u8A2A\u5BA2\u8EAB\u4EFD\u767B\u5165\uFF1F")],-1),Pe={__name:"AuthLogin",emits:["showSuccess","showInfo","showWarn","showError"],setup(e,{emit:t}){const o=le(),r=new Ae,u=new ie,i=new ce,s=v({email:"",password:"",checked:!1}),m=v({title:"\u8A2A\u5BA2\u767B\u5165\u6CE8\u610F\u4E8B\u9805",content:"\u8A2A\u5BA2\u5E33\u865F\u70BA\u81E8\u6642\u6027\u5E33\u865F\uFF0C\u767B\u51FA\u6216\u700F\u89BD\u5668\u95DC\u9589\u5F8C\u5C07\u7121\u6CD5\u518D\u6B21\u767B\u5165\u76F8\u540C\u5E33\u865F\uFF0C\u8ACB\u5118\u901F\u524D\u5F80\u500B\u4EBA\u8CC7\u6599\u9801\u9762\uFF0C\u9032\u884C\u4FE1\u7BB1\u8A3B\u518A\u3002\u9801\u9762\u7DB2\u5740\uFF1Ahttp://localhost:5173/Vue3-Game-Xian/#/user/userProfile",type:"system"}),b=v(!1),Y=(p,l)=>{u.signIn(p,l).then(f=>{f&&(s.value.checked?r.setAuthStorage(s.value):r.resetAuthStorage(),t("showSuccess","\u767B\u5165\u6210\u529F"),o.push("/"))}).catch(f=>{t("showError",f)})},q=()=>{b.value=!1,u.signInAnonymously().then(p=>{p&&(t("showSuccess","\u767B\u5165\u6210\u529F"),i.sendSystemMail(m.value),o.push("/"))}).catch(p=>{t("showError",p)})},H=()=>{b.value=!0},K=()=>{b.value=!1};return re(()=>{r.getAuthStorage()&&(s.value=r.getAuthStorage())}),(p,l)=>{const f=x("router-link"),Q=x("InputText"),ee=x("Password"),te=x("Checkbox"),_=x("Button"),oe=x("Dialog");return ne(),se("div",Se,[a("div",ve,[a("div",Ce,[a("div",Be,[a("div",Ue,[ke,Ie,c(f,{class:"font-medium no-underline ml-0 text-right cursor-pointer",style:{color:"var(--primary-color)"},to:"/auth/login"},{default:w(()=>[C("\u5E33\u6236\u767B\u5165")]),_:1}),c(f,{class:"font-medium no-underline ml-2 text-right cursor-pointer",style:{color:"var(--primary-color)"},to:"/auth/register"},{default:w(()=>[C("\u5E33\u6236\u8A3B\u518A")]),_:1})]),a("div",null,[Ve,c(Q,{id:"email1",type:"text",placeholder:"Email address",class:"w-full md:w-30rem mb-4",style:{padding:"1rem"},modelValue:s.value.email,"onUpdate:modelValue":l[0]||(l[0]=d=>s.value.email=d)},null,8,["modelValue"]),Ee,c(ee,{id:"password1",modelValue:s.value.password,"onUpdate:modelValue":l[1]||(l[1]=d=>s.value.password=d),placeholder:"Password",feedback:!1,toggleMask:!0,class:"w-full mb-3",inputClass:"w-full"},null,8,["modelValue"]),a("div",Fe,[a("div",De,[c(te,{modelValue:s.value.checked,"onUpdate:modelValue":l[2]||(l[2]=d=>s.value.checked=d),id:"rememberme1",binary:"",class:"mr-2"},null,8,["modelValue"]),Ne]),c(f,{class:"font-medium no-underline ml-2 text-right cursor-pointer",style:{color:"var(--primary-color)"},to:"/auth/forget"},{default:w(()=>[C("\u5FD8\u8A18\u5BC6\u78BC?")]),_:1})]),c(_,{label:"\u767B\u5165",class:"w-full p-3 text-xl mb-2",onClick:l[3]||(l[3]=d=>Y(s.value.email,s.value.password))}),c(_,{label:"\u4EE5\u8A2A\u5BA2\u8EAB\u4EFD\u767B\u5165",class:"w-full p-3 text-xl",onClick:H})])])]),c(oe,{header:"\u78BA\u8A8D",visible:b.value,"onUpdate:visible":l[5]||(l[5]=d=>b.value=d),style:{width:"350px"},modal:!0},{footer:w(()=>[c(_,{label:"No",icon:"pi pi-times",onClick:K,class:"p-button-text"}),c(_,{label:"Yes",icon:"pi pi-check",onClick:l[4]||(l[4]=d=>q()),class:"p-button-text"})]),default:w(()=>[Re]),_:1},8,["visible"])])])}}};export{Pe as default};
